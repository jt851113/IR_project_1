Because there may be situations where the RAM or latency costs of the child cache are not desirable, it is worthwhile to look at alternative approaches for improving loss tolerance. In this section, we show how the network topology can be leveraged to increase the quality of aggregates. Consider a mote with two possible choices of parent: instead of sending its aggregate value to just one parent, it can send it to both parents. A node can easily discover that it has multiple parents by building a list of nodes it has heard that are one step closer to the root. Of course, for duplicate-sensitive aggregates (see Section 3.2), sending results to multiple parents has the undesirable effect of causing the node to be counted multiple times. The solution to this is to send part of the aggregate to one parent and the rest to the other. Consider a COUNT; a mote with c-1 children and two parents can send a COUNT of U  to both parents instead of a count of c/2 to a single parent. Generally, if the aggregate can be linearly decomposed in this fashion, it is possible to broadcast just a single message that is received and processed by both parents, so this scheme incurs no message overheads, as long as both parents are at the same level and request data delivery during the same sub-interval of the epoch.
A simple statistical analysis reveals the advantage of doing this: assume that a message is transmitted with probability p1 , and that losses are independent, so that if a mes-sage m from node n is lost in transition to parent p1, it is
no more likely to be lost in transit to p2. 6 First, consider
6Although independent failures are not always a valid assumption,
the case where s sends c to a single parent; the expected value of the transmitted count is p*x (0 with probability (1-p) and c with probability p), and the variance is c2*p*(1-p), since these are standard Bernoulli trials with a probability of success p multiplied by a constant c.
For the case where 8 sends c/2 to both parents, linearity of expectation tells us the expected value is the sum of the expected value througheach parent, or
2*p*c/2=p*c . Similarly, we can sum the variances through each parent:
 Thus, the variance of the multiple parent COUNT is much less than with just a single parent, although its expected value is the same. This is because it is much less likely (assuming independence) for the message to both parents to be lost, and a single loss will less dramatically affect the computed value.
We ran an experiment to measure the bene?t of this approach in the realistic topology for COUNT with a network diameter of 50. We measured the number of devices involved in the aggregation over a 50 epoch period. When sending to multiple parents, the mean COUNT was 974 (), while when sending to only one parent, the mean COUNT was 94 (). Surprisingly, sending to multiple parents substantially increases the mean aggregate value; most likely this is due to the fact that losses are not truly independent as we assumed above.
This technique applies equally well to any distributive or algebraic aggregate. For holistic aggregates, like MEDIAN, this technique cannot be applied, since partial state records cannot be easily decomposed.
