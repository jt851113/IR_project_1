A Fjord is a generalization of traditional approaches
to query plans: operators export an iterator-like interface
and are connected together via local pipes or wide area
queues. Fjords, however, also provide support for integrating
streaming data that is pushed into the system with
disk-based data which is pulled by traditional operators. As
we will show, Fjords also allow combining multiple queries
into a single plan and explicitly handle operators with multiple
inputs and outputs.
Previous database architectures are not capable of combining
streaming and static data. They are either strictly
pull-based, as with the standard iterator model, or strictly
push based, as in parallel processing environments. We believe
that the hybrid approach adopted by Fjords, whereby
streams can be combined with static sources in a way which
varies from query-to-query is an essential part of any data
processing system which claims to be able to compute over
streams.
Figure 2 shows a Fjord running across two machines,
with the left side detailing the modules running on a local
machine. Each machine involved in the query runs a
single controller in its own thread. This controller accepts
messages to instantiate operators, which include the set of
standard database modules â€“ join, select, project, and so on.
The controller also connects local operators via queues to
other operators which may be running locally or remotely.
Queues export the same interface whether they connect two
local operators or two operators running on different machines,
thus allowing operators to be ignorant of the nature
of their connection to remote machines. Each query running
on a machine is allocated its own thread, and that thread
is multiplexed between the local operators via procedure
calls (in a pull-based architecture) or via a special scheduler
module that directs operators to consume available inputs or
to produce outputs if they are not explicitly invoked by their
parents in the plan. The Fjord shown in Figure 2 was instantiated
by a message arriving at the local controller; it applies
two predicates to a stream of tuples generated by joining a
sensor stream with a remote disk source.
In the rest of this section, we discuss the specific architecture
of operators and queues in Fjords.