Even though SRTs are limited to constant attributes, some SRT maintenance must occur. In particular, new nodes can appear, link qualities can change, and existing nodes can fail.
Node appearance and link quality change can both require a node to switch parents. To do this, it sends a parent selection message to its new parent, n. If this message changes the range of n’s interval, it noti?es its parent; in this way, updates can propagate to the root of the tree.
To handle the disappearance of a child node, parents associate an active query id and last epoch with every child in the SRT (recall that an epoch is the period of time between successive samples.) When a parent p forwards a query q to a child c, it sets c’s active query id to the id of q and sets its last epoch entry to 0. Every time p forwards or aggregates a result for q from c, it updates c’s last epoch with the epoch on which the result was received. If p does not hear c for some number of epochs t, it assumes c has moved away, and removes its SRT entry. Then, p sends a request asking its remaining children retransmit their ranges. It uses this information to construct a new interval. If this new interval differs in size from the previous interval, p sends a parent selection message up the routing tree to re?ect this change.
Finally, we note that, by using these maintenance rules proposed, it is possible to support SRTs over non-constant attributes, although if those attributes change quickly, the cost of propagating changes in child intervals could be prohibitive.
